<!-- this element is auto-generated -->
<!-- adapted from opieters liquid. Update your sources by running _data/galleries/gallery_creator.py python preprocess script -->
<div id="image-gallery{% if include.id_number %}-{{ include.id_number }}{% endif %}">
  {% for picture in include.gallery.pictures %}
    <a
      href="{{ site.baseurl }}/assets/img-noresample/{{ include.gallery.picture_path }}/{{ picture.original }}"
      class="image-ref"
      {% if picture.title %}
        data-sub-html="<div class='lg-toolbar caption'><h4>{{ picture.title | escape }}</h4>{% if picture.caption %}<p>{{ picture.caption | escape }}</p>{% endif %}</div>"
      {% endif %}
    >
      <img alt="{{ picture.title }}" src="{{ site.baseurl }}/assets/img-noresample/{{ include.gallery.picture_path }}/{{ picture.thumbnail }}">
    </a>
  {% endfor %}
</div>

<script>
  window.addEventListener('DOMContentLoaded',() =>{
    lightGallery(document.getElementById("image-gallery{% if include.id_number %}-{{ include.id_number }}{% endif %}"), {
      plugins: [lgThumbnail, lgZoom],
      speed: 500,
      selector: '.image-ref',
      thumbnails: true,
      thumbWidth: 60,
      thumbHeight: "40px",
      thumbMargin: 4,
      mobileSettings: {
        controls: false,
        showCloseIcon: true,
        download: false,
        rotate: false,
        thumbnail: false,
      }
    });

  // init isotope
  var $grid{% if include.id_number %}{{ include.id_number }}{% endif %} = $('#image-gallery{% if include.id_number %}-{{ include.id_number }}{% endif %}');
  $grid{% if include.id_number %}{{ include.id_number }}{% endif %}.isotope({
    percentPosition: true,
    itemSelector: '.image-ref',
    layoutMode: "masonry",
    gutter: 5
  });

  // layout Isotope after each image loads
  $grid{% if include.id_number %}{{ include.id_number }}{% endif %}.imagesLoaded().progress( function() {
    $grid{% if include.id_number %}{{ include.id_number }}{% endif %}.masonry();
  });
  });
</script>
