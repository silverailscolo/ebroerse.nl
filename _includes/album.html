<div id="{{include.albumname}}">
  <!-- div autogenerated from folder {{ include.albumname }} of imgs, based on Jimmy Xiao -->
  <!-- uses _plugins/Jekyll-ExifTag.rb and exif .node_module -->
  {% for image in site.static_files %} {% if image.path contains 'img' and image.path contains include.albumname %} {% unless image.name contains
  '.webp' %} {% assign copy = {{ exiftag copyright, , {{ image.path }} }} %} {% assign title = {{ exiftag xp_title, , {{ image.path }} }} %}
  <a href="{{ image.path }}" class="image-ref" data-sub-html="{{ title }} {{ copy }}">
    <img src="/thumbnails/{{ include.albumname }}/{{ image.name }}" alt="{{ title }}" />
  </a>
  {% endunless %}{% endif %}{% endfor %}
</div>

<script>
  window.addEventListener("DOMContentLoaded", () => {
    lightGallery(document.getElementById("{{ include.albumname }}"), {
      plugins: [lgZoom, lgThumbnail, lgAutoplay, lgFullscreen],
      speed: 500,
      thumbnails: true,
      thumbWidth: 60,
      thumbHeight: "40px",
      thumbMargin: 4,
      showMaximizeIcon: true,
      mobileSettings: {
        controls: false,
        showCloseIcon: true,
        download: false,
        rotate: false,
        thumbnail: false,
      },
    });

    // init isotope
    var $grid = $( {{include.albumname}} );
    $grid.isotope({
      percentPosition: true,
      itemSelector: '.image-ref',
      layoutMode: "masonry",
      gutter: 5
    });

    // layout Isotope after each image loads
    $grid.imagesLoaded().progress( function() {
      $grid.masonry();
    });
  });
</script>
