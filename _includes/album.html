<div id="{{include.albumname}}">
  <!-- div autogenerated from folder {{ include.albumname }} of imgs, based on Jimmy Xiao, uses
  _plugins/Jekyll-ExifTag.rb and exifr .node_module -->
  {% for image in site.static_files %} {% if image.path contains 'img' and image.path contains include.albumname %}
  <a
    href="{{ image.path }}"
    class="image-ref"
    data-sub-html="{% exiftag image_title, , {{ image.path }} %}"
  >
    <img src="/thumbnails/{{ include.albumname }}/{{ image.name }}"
         alt="{% exiftag image_title, , {{ image.path }} %}" />
  </a>
  {% endif %} {% endfor %}
</div>

<script>
  window.addEventListener("DOMContentLoaded", () => {
    lightGallery(document.getElementById("{{ include.albumname }}"), {
      plugins: [lgThumbnail, lgZoom],
      speed: 500,
      thumbnails: true,
      thumbWidth: 60,
      thumbHeight: "40px",
      thumbMargin: 4,
      mobileSettings: {
        controls: false,
        showCloseIcon: true,
        download: false,
        rotate: false,
        thumbnail: false,
      },
    });
    imagesLoaded(document.getElementById("{{ include.albumname }}"), function () {
      new Masonry(document.getElementById("{{ include.albumname }}"), {
        percentPosition: true,
        itemSelector: ".image-ref",
        layoutMode: "masonry",
        gutter: 5,
      });
    });
  });
</script>
