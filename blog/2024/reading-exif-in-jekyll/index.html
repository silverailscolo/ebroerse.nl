<!DOCTYPE html> <html lang="en-us"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, notranslate, noimageindex"> <title> Reading EXIF tags in Jekyll with exiftools | favicon.png </title> <meta name="author" content="Egbert Broerse"> <meta name="description" content="Entertaining info on me and my occupations."> <meta name="keywords" content="architecture, house, trains"> <link rel="stylesheet" href="/ebroerse.nl/assets/css/bootstrap.min.css?59683d8d628e6717785b508ec539c429"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/ebroerse.nl/assets/css/academicons.min.css?9dbe0c76bacd463500b79ed6a86e27ac"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/ebroerse.nl/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/ebroerse.nl/assets/img/favicon.png?7de88881c5eea3dd7fcff1b84ec5f1bf"> <link rel="stylesheet" href="/ebroerse.nl/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://silverailscolo.github.io/ebroerse.nl/blog/2024/reading-exif-in-jekyll/"> <link defer rel="stylesheet" href="/ebroerse.nl/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/ebroerse.nl/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/ebroerse.nl/"> <div><img src="/ebroerse.nl/assets/img/favicon.png" alt="Broerse"></div> </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/ebroerse.nl/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/ebroerse.nl/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/ebroerse.nl/architect/">architecture </a> </li> <li class="nav-item "> <a class="nav-link" href="/ebroerse.nl/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/ebroerse.nl/gallery/">collections </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">trains </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/ebroerse.nl/trains/layout">my Layout</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ebroerse.nl/rollingstock">my Roster</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ebroerse.nl/trains/dcc">DCC</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ebroerse.nl/trains/prototype">Prototype</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ebroerse.nl/trains/tips">Tips</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">house </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/ebroerse.nl/house/garden">garden</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ebroerse.nl/house/renovation">renovation</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ebroerse.nl/house/history">history</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ebroerse.nl/house/smart">smart home</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ebroerse.nl/house/ms15">first house</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">computers </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/ebroerse.nl/computers/repositories">GitHub Repositories</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ebroerse.nl/computers/mymacs">my Macs</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ebroerse.nl/computers/macintosh">Mac tips</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ebroerse.nl/computers/lubuntu">Lubuntu tips</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/ebroerse.nl/computers/playground">Playground</a> </div> </li> <li class="nav-item active"> <a class="nav-link" href="/ebroerse.nl/nl/blog/2024/reading-exif-in-jekyll/"> NL</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Reading EXIF tags in Jekyll with exiftools</h1> <p class="post-meta"> April 19, 2024 </p> <p class="post-tags"> <a href="/ebroerse.nl/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/ebroerse.nl/blog/tag/computers"> <i class="fa-solid fa-hashtag fa-sm"></i> computers</a>     ·   <a href="/ebroerse.nl/blog/category/software"> <i class="fa-solid fa-tag fa-sm"></i> software</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>As I am migrating this site to Jekyll / GitHub pages, I am integrating data that was separate (and under the jood) up to now. That requires a bit of scripting, with minimal re-entry of stuff.</p> <p>An important example are my pictures, that I once managed in Extensis Portfolio, and later as separate files on a local HD.</p> <p>It would be noce to let you read a caption with each photo that I add to the site, and as I remembered that I once put keywords and captions for many images into the image files as EXIF tags, I now try to read those fields from the images and apply them as captions in the lightGallery slide shows, like <a href="../../assets/art-gallery/sketches/">here</a></p> <p>A lot of (old) tools are available to extract the EXIF tags, but Portfolio used other fields… After EXIF came IPTC tags, used for GPS lat/long data, title etc. IPTC is sparsely supported bij ruby tools. And as it happens, my image captions are in so called XMP tags, for which just a few tools provide support.</p> <p>To make things more complicated, modern image management tools like Adobe LightRoom and DigiKam allow you to enter labels in XMp and copy those strings to IPTC and EXIF respectively (although XMP allows for longer strings, and EXIF only allows for printable ASCII character, so where do the ü and Ø go?).</p> <p>Today I discovered a tool called <a href="https://exiftool.org/" rel="external nofollow noopener" target="_blank">exiftool</a>, that finally will give me access to my cherished image captions. From inside Jekyll you can use it through the <a href="https://rubygems.org/gems/exiftool/versions/1.2.5" rel="external nofollow noopener" target="_blank">exiftool gem</a>. After a bit of fiddling, I am now able to display all text fields stored in a picture file, and automatically copy it to the html code for one of my web galleries. Exiftool Docs warn that the three tag types overlap, unless you ask for -all tags. If we focus on the caption and the copyright fields, these are the specific tag names to fetch:</p> <table> <thead> <tr> <th>Type</th> <th>Caption field name</th> <th>Copyright field name</th> <th>Used</th> </tr> </thead> <tbody> <tr> <td>EXIF</td> <td>user_comment</td> <td>copyright</td> <td> </td> </tr> <tr> <td>IPTC</td> <td>“caption-abstract”</td> <td>copyright_notice</td> <td>&lt;–</td> </tr> <tr> <td>XMP</td> <td>description</td> <td>rights</td> <td> </td> </tr> </tbody> </table> <p>In Ruby code that makes for:</p> <p>require ‘exiftool’ … exiftoolbatch = Exiftool.new(Dir[”#{Dir.pwd + ‘/’ + dir}/<em>.</em>”]) # we are in original_dir … exif = exiftoolbatch.result_for(fullpath) … capt = exif[:”caption-abstract”] copy = exif[:copyright]</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/ebroerse.nl/blog/2018/translation-dilemmas/">Translation Dilemmas</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/ebroerse.nl/blog/2015/git-it/">Git it?</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/ebroerse.nl/blog/2017/assembling-the-rlw-nn3-k-27-kit/">Assembling the RLW Nn3 K-27 kit</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/ebroerse.nl/blog/2024/smartovendisplay/">Build an AGA Cooker Display</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/ebroerse.nl/blog/2024/goodbye-hypersite/">Hypersite stack</a> </li> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Egbert Broerse. Last updated: April 19, 2024. </div> </footer> <script src="/ebroerse.nl/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/ebroerse.nl/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/ebroerse.nl/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/ebroerse.nl/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/ebroerse.nl/assets/js/common.js?da39b660470d1ba6e6b8bf5f37070b6e"></script> <script defer src="/ebroerse.nl/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/ebroerse.nl/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>